<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Sell Crop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="text-success mb-4">üåæ Sell Your Harvest</h2>
    <div class="bg-white p-4 rounded shadow-sm">
        <table class="table align-middle">
            <thead>
            <tr>
                <th>Crop</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="crop : ${crops}">
                <td th:text="${crop.cropName}"></td>
                <td th:text="${crop.area + ' Acres'}"></td>
                <td>
        <span class="badge"
              th:classappend="${crop.sellStatus == 'NOT_SOLD' ? 'bg-success' : 'bg-warning'}"
              th:text="${crop.sellStatus}"></span>
                </td>
                <td>
                    <form th:if="${crop.sellStatus == 'NOT_SOLD'}"
                          th:action="@{/farmer/submit-sell-request}" method="post" class="d-flex gap-2">

                        <input type="hidden" name="cropId" th:value="${crop.id}">

                        <select name="deliveryMode" class="form-select form-select-sm" required>
                            <option value="Home Pickup">Home Pickup</option>
                            <option value="Mandi Slot">Mandi Slot</option>
                        </select>

                        <button type="submit" class="btn btn-dark btn-sm text-nowrap">Submit Sell Request</button>
                    </form>

                    <span th:if="${crop.sellStatus != 'NOT_SOLD'}" class="text-muted small">
            ‚è≥ Processing Request
        </span>
                </td>
            </tr>
            </tbody>
        </table>
        <a href="/farmer/dashboard" class="btn btn-link">‚¨Ö Back</a>
    </div>
</div>
</body>
</html>